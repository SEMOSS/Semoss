[
  {
    "query": "AddPanel ( 0 ) ;Panel ( 0 ) | AddPanelConfig ( config = [ { \"config\" : { \"type\" : \"STANDARD\" , \"opacity\" : 100 } } ] ) ;Panel ( 0 ) | AddPanelEvents ( { \"onSingleClick\" : { \"Unfilter\" : [ { \"panel\" : \"\" , \"query\" : \"<encode>UnfilterFrame(<SelectedColumn>);</encode>\" , \"options\" : { } , \"refresh\" : false , \"default\" : true , \"disabledVisuals\" : [ \"Grid\" , \"Sunburst\" ] , \"disabled\" : false } ] } , \"onBrush\" : { \"Filter\" : [ { \"panel\" : \"\" , \"query\" : \"<encode>if(IsEmpty(<SelectedValues>), UnfilterFrame(<SelectedColumn>), SetFrameFilter(<SelectedColumn>==<SelectedValues>));</encode>\" , \"options\" : { } , \"refresh\" : false , \"default\" : true , \"disabled\" : false } ] } } ) ;Panel ( 0 ) | RetrievePanelEvents ( ) ;Panel ( 0 ) | SetPanelView ( \"visualization\" , \"<encode>{\"type\":\"echarts\"}</encode>\" ) ;AuditDatabase ( app = [ \"<<ENGINE>>\"],tables=[<Table>], columns= [<Altered_Column>] );Panel ( 0 ) | Clone ( 1 ) ;Panel ( 1 ) | SetPanelView ( \"visualization\" ) ;Panel ( 1 ) | AddPanelConfig ( config = [ { \"config\" : { \"subType\" : \"\" } } ] ) ;Panel ( 1 ) | SetPanelView ( \"visualization\" , \"<encode>{\"type\":\"echarts\"}</encode>\" ) ;if ( ( HasDuplicates ( Modification_Type ) ) , ( Select ( Modification_Type , UniqueCount ( Modification_Date ) ) .as ( [ Modification_Type , UniqueCountofModification_Date ] ) | Group ( Modification_Type ) | With ( Panel ( 1 ) ) | Format ( type = [ 'table' ] ) | TaskOptions ( { \"1\" : { \"layout\" : \"Column\" , \"alignment\" : { \"label\" : [ \"Modification_Type\" ] , \"value\" : [ \"UniqueCountofModification_Date\" ] , \"tooltip\" : [ ] , \"facet\" : [ ] } } } ) | Collect ( 500 ) ) , ( Select ( Modification_Type , Count ( Modification_Date ) ) .as ( [ Modification_Type , CountofModification_Date ] ) | Group ( Modification_Type ) | With ( Panel ( 1 ) ) | Format ( type = [ 'table' ] ) | TaskOptions ( { \"1\" : { \"layout\" : \"Column\" , \"alignment\" : { \"label\" : [ \"Modification_Type\" ] , \"value\" : [ \"CountofModification_Date\" ] , \"tooltip\" : [ ] , \"facet\" : [ ] } } } ) | Collect ( 500 ) ) ) ;Panel ( 0 ) | SetPanelView ( \"visualization\" , \"<encode>{\"type\":\"standard\"}</encode>\" ) ;Panel(0)|SetPanelView(\"text-widget\", \"<encode>{\"html\":\"<style>\n    #TextWidget .container {\n        margin-left: 20px;\n        margin-top: 10px;\n        display: inline-flex;\n    }\n\n    #TextWidget .mod-container {\n        background-color: #033d84;\n        color: white;\n        height: 100px;\n    }\n\n    #TextWidget .mod-info {\n        margin-left: 35px;\n    }\n\n    #TextWidget .total-mod {\n        font-size: xx-large;\n    }\n\n    #TextWidget .Col-Header {\n        color: #143f5b;\n    }\n\n    #TextWidget .audit-container {\n        /* float: left; */\n        /* height: 100%; */\n        display: inline-grid;\n        overflow: auto;\n    }\n\n    #TextWidget .audit-output {\n        margin: 10px 5px;\n        /* margin-bottom: 10px;\n        margin-top: 25px; */\n        /* height: 130px; */\n    }\n\n    /* #TextWidget .audit-constants {\n        border-bottom: 2px solid black;\n    } */\n\n    #TextWidget .audit-values {\n        padding: 10px 0;\n    }\n\n    #TextWidget .Audit-Element {\n        margin-top: -3px;\n        margin-bottom: -3px;\n        color: #323a45;\n    }\n\n    #TextWidget .audit-type {\n        position: relative;\n        float: left;\n        width: 40px;\n        /* height: 130px; */\n        margin-right: 5px;\n    }\n\n    #TextWidget .audit-type-text {\n        position: absolute;\n        width: 100%;\n        color: white;\n        top: 45%;\n        left: 50%;\n        transform: translateX(-50%) translateY(-50%) rotate(-90deg);\n    }\n\n    #TextWidget .type-insert {\n        background-color: green;\n        height: 100%;\n        /* height: 130px; */\n    }\n\n    #TextWidget .type-delete {\n        background-color: red;\n        height: 100%;\n        /* height: 130px; */\n    }\n\n    #TextWidget .type-update {\n        background-color: blue;\n        height: 100%;\n        /* height: 130px; */\n    }\n\n    #TextWidget .arrow {\n        margin-left: 7px;\n        margin-right: 8px;\n        font-weight: bolder;\n    }\n</style>\n<div class=\\\"big-container\\\">\n    <div class=\\\"mod-container\\\" ng-repeat=\\\"Mod in Audit_Mods[0].output.data.values\\\">\n        <div class=\\\"mod-info\\\">\n            <p class=\\\"total-mod\\\">{{ Mod[0] }}<br />Total Modifications</p>\n        </div>\n    </div>\n    <div class=\\\"audit-container\\\">\n        <div class=\\\"container\\\" ng-repeat=\\\"Aud in Audits[0].output.data.values\\\">\n            <div class=\\\"audit-type\\\">\n                <div\n                    ng-class=\\\"{'type-insert': Aud[2] == 'INSERT', 'type-delete': Aud[2] == 'DELETE', 'type-update': Aud[2] == 'UPDATE'}\\\">\n                    <span class=\\\"span-type-bar\\\"></span>\n                    <h3 class=\\\"audit-type-text\\\">{{ Aud[2] | replaceUnderscores }}</h3>\n                </div>\n            </div>\n            <div class=\\\"audit-output\\\">\n                <div class=\\\"audit-constants\\\">\n                    <h3 class=\\\"Audit-Element\\\"> <span class=\\\"Col-Header\\\">Modification Date</span>:\n                        {{ Aud[0] | replaceUnderscores }}</h3>\n                    <h3 class=\\\"Audit-Element\\\"><span class=\\\"Col-Header\\\">User Email</span>:\n                        {{ Aud[1] }}</h3>\n                    <h3 class=\\\"Audit-Element\\\"> <span class=\\\"Col-Header\\\">Key Column Value</span>:\n                        {{ Aud[4] | replaceUnderscores }}</h3>\n                </div>\n                <div ng-repeat=\\\"Audit in Audit_Table[0].output.data.values\\\" >\n                    <div ng-if='Aud[3] == Audit[7]' class=\\\"audit-values\\\">\n                        <h3 class=\\\"Audit-Element\\\"> <span class=\\\"Col-Header\\\">Altered Column</span>:\n                            {{ Audit[0] | replaceUnderscores }}</h3>\n                        <h3 class=\\\"Audit-Element\\\"><span class=\\\"Col-Header\\\">Old Value</span>: {{ Audit[2] | replaceUnderscores }}\n                            <span class=\\\"arrow\\\">&rArr;</span><span class=\\\"Col-Header\\\">New Value</span>:\n                            {{ Audit[3] | replaceUnderscores }}</h3>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\",\"varList\":[{\"name\":\"Audit_Table\",\"query\":\"Select ( Altered_Column , Key_Column_Value , Old_Value , New_Value , Modification_Date , User_Email, Modification_Type, Id ) | Order (columns = [\\\"Modification_Date\\\",\\\"Key_Column_Value\\\"], sort = [\\\"desc\\\"] ) |CollectAll();\"},{\"name\":\"Audit_Mods\",\"query\":\"Select (UniqueCount(Modification_Date)) | CollectAll();\"},{\"name\":\"Audits\",\"query\":\"Select ( Modification_Date , User_Email , Modification_Type , Id, Key_Column_Value  ) | Order ( columns = [ \\\"Modification_Date\\\" ] , sort = [ \\\"desc\\\" ] ) | CollectAll ( )\"}],\"freeze\":false,\"loading\":true}</encode>\");Panel ( 0 ) | SetPanelLabel (\"Audit Log\");Panel ( 1 ) | SetPanelLabel (\"Audit View\");AddPanel(2);Panel(2)|AddPanelConfig(config=[{\"config\":{\"type\":\"COLLAPSIBLE\",\"opacity\":100,\"subType\":\"\"},\"label\":\"User_Email Filter\"}]);Panel(2)|SetPanelView(\"DashboardFilter\");Panel(2)|AddPanelOrnaments({\"dashboardFilter\":{\"singleSelect\":\"Multi Select\",\"viewType\":\"List\",\"instances\":[\"User_Email\"]}})|RetrievePanelOrnaments(\"dashboardFilter\");",
    "label": "<<INSIGHT_NAME>>",
    "description": "",
    "params": [
      {
        "paramName": "Table",
        "required": true,
        "useSelectedValues": true,
        "view": {
          "displayType": "dropdown",
          "label": "Select the Altered Table",
          "attributes": {
            "searchable": true,
            "quickselect": true
          }
        },
        "model": {
          "query": "GetDatabaseConcepts(database=[\"<<ENGINE>>\"]);"
        }
      },
      {
        "paramName": "Altered_Column",
        "required": true,
        "useSelectedValues": true,
        "view": {
          "displayType": "checklist",
          "label": "Select the Altered_Column",
          "attributes": {
            "searchable": true,
            "multiple": true,
            "quickselect": true
          }
        },
        "model": {
          "query": "GetSpecificConceptProperties(database=[\"<<ENGINE>>\"], concept=[<Table>]);",
          "dependsOn": [
            "Table"
          ]
        }
      }
    ],
    "execute": "button"
  }
]